{% extends 'base.html' %}
{% load static %}
{% block content %}
<style>
    .profile-image {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        background-color: #d3d3d3; /* 기본 회색 배경 */
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
    }
    .profile-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .hidden {
        display: none;
    }
    .categories, .sub-categories {
        margin-bottom: 20px;
    }
    .posts, .bookmarks {
        display: none;
    }
</style>

<header>
    <h1>ALLO</h1>
</header>
<main>
    <section class="profile">
        <div class="profile-image">
            {% if user.profile_image %}
                <img src="{{ user.profile_image.url }}" alt="프로필 사진">
            {% else %}
                <p>Profile image: 현재: 없음</p>
            {% endif %}
        </div>
        <h2>{{ user.name }}</h2>
        <a href="{% url 'users_user:profile_edit' %}">프로필 편집</a>
    </section>
    <section class="ranking">
        <h3>My ranking</h3>
        <p>{{ ranking }} 위</p>
    </section>
    <section class="categories">
        <button onclick="showSubCategory('my_posts')">내 글</button>
        <button onclick="showSubCategory('bookmarked')">북마크 한 글</button>
    </section>
    <section class="sub-categories">
        <div id="my_posts" class="hidden">
            <button onclick="showContent('posts', 'community')">자유게시판</button>
            <button onclick="showContent('posts', 'recipe')">요리</button>
            <button onclick="showContent('posts', 'interior')">인테리어</button>
            <button onclick="showContent('posts', 'all')">전체</button>
        </div>
        <div id="bookmarked" class="hidden">
            <button onclick="showContent('bookmarks', 'community')">자유게시판</button>
            <button onclick="showContent('bookmarks', 'recipe')">요리</button>
            <button onclick="showContent('bookmarks', 'interior')">인테리어</button>
            <button onclick="showContent('bookmarks', 'all')">전체</button>
        </div>
    </section>
    <section id="posts-community" class="posts content-section posts-community hidden">
        <h3>자유게시판 내 글</h3>
        {% for post in community_posts %}
            <article>
                <h4>{{ post.title }}</h4>
                <p>{{ post.content }}</p>
                <span>{{ post.created_at }}</span>
            </article>
        {% endfor %}
    </section>
    <section id="posts-recipe" class="posts content-section posts-recipe hidden">
        <h3>요리 내 글</h3>
        {% for post in recipe_posts %}
            <article>
                <h4>{{ post.recipe_name }}</h4>
                <p>{{ post.ingredients }}</p>
                <span>{{ post.created_at }}</span>
            </article>
        {% endfor %}
    </section>
    <section id="posts-interior" class="posts content-section posts-interior hidden">
        <h3>인테리어 내 글</h3>
        {% for post in interior_posts %}
            <article>
                <h4>{{ post.title }}</h4>
                <p>{{ post.content }}</p>
                <span>{{ post.created_at }}</span>
            </article>
        {% endfor %}
    </section>
    <section id="posts-all" class="posts content-section posts-all hidden">
        <h3>전체 내 글</h3>
        {% for post in community_posts %}
            <article>
                <h4>{{ post.title }}</h4>
                <p>{{ post.content }}</p>
                <span>{{ post.created_at }}</span>
            </article>
        {% endfor %}
        {% for post in recipe_posts %}
            <article>
                <h4>{{ post.recipe_name }}</h4>
                <p>{{ post.ingredients }}</p>
                <span>{{ post.created_at }}</span>
            </article>
        {% endfor %}
        {% for post in interior_posts %}
            <article>
                <h4>{{ post.title }}</h4>
                <p>{{ post.content }}</p>
                <span>{{ post.created_at }}</span>
            </article>
        {% endfor %}
    </section>
    <section id="bookmarks-community" class="bookmarks content-section bookmarks-community hidden">
        <h3>자유게시판 북마크</h3>
        {% for bookmark in community_bookmarks %}
            <article>
                <h4>{{ bookmark.title }}</h4>
                <p>{{ bookmark.content }}</p>
                <span>{{ bookmark.created_at }}</span>
            </article>
        {% endfor %}
    </section>
    <section id="bookmarks-recipe" class="bookmarks content-section bookmarks-recipe hidden">
        <h3>요리 북마크</h3>
        {% for bookmark in recipe_bookmarks %}
            <article>
                <h4>{{ bookmark.recipe_name }}</h4>
                <p>{{ bookmark.ingredients }}</p>
                <span>{{ bookmark.created_at }}</span>
            </article>
        {% endfor %}
    </section>
    <section id="bookmarks-interior" class="bookmarks content-section bookmarks-interior hidden">
        <h3>인테리어 북마크</h3>
        {% for bookmark in interior_bookmarks %}
            <article>
                <h4>{{ bookmark.title }}</h4>
                <p>{{ bookmark.content }}</p>
                <span>{{ bookmark.created_at }}</span>
            </article>
        {% endfor %}
    </section>
    <section id="bookmarks-all" class="bookmarks content-section bookmarks-all hidden">
        <h3>전체 북마크</h3>
        {% for bookmark in community_bookmarks %}
            <article>
                <h4>{{ bookmark.title }}</h4>
                <p>{{ bookmark.content }}</p>
                <span>{{ bookmark.created_at }}</span>
            </article>
        {% endfor %}
        {% for bookmark in recipe_bookmarks %}
            <article>
                <h4>{{ bookmark.recipe_name }}</h4>
                <p>{{ bookmark.ingredients }}</p>
                <span>{{ bookmark.created_at }}</span>
            </article>
        {% endfor %}
        {% for bookmark in interior_bookmarks %}
            <article>
                <h4>{{ bookmark.title }}</h4>
                <p>{{ bookmark.content }}</p>
                <span>{{ bookmark.created_at }}</span>
            </article>
        {% endfor %}
    </section>
</main>
{% endblock %}

{% block script %}
<script>
    function showCategory(category) {
        document.querySelectorAll('.posts, .bookmarks').forEach(function(section) {
            section.style.display = 'none';
        });
        document.getElementById(category).style.display = 'block';
    }
    
    function showSubCategory(type) {
        document.querySelectorAll('.sub-categories > div').forEach(function(section) {
            section.style.display = 'none';
        });
        document.getElementById(type).style.display = 'block';
    }

    function showContent(type, category) {
        document.querySelectorAll('.content-section').forEach(function(section) {
            section.style.display = 'none';
        });
        document.querySelectorAll(`.${type}-${category}`).forEach(function(section) {
            section.style.display = 'block';
        });
    }
</script>
{% endblock %}
