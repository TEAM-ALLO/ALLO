{% extends 'base.html' %}
{% load static %}
{% block head %}
    <link rel="stylesheet" href="/static/css/community/community_list.css">
{% endblock %}
{% block content %}
<div class="community-header">
    <div class="community-category community-categoty-selected"><a href="{% url 'community_user:post_list' %}">ì»¤ë®¤ë‹ˆí‹°</a></div>
    <div class="community-category"><a href="{% url 'community_user:event_list' %}">ì´ë²¤íŠ¸</a></div>
    <div class="community-category"><a href="{% url 'community_user:notice_list' %}">ê³µì§€</a></div>
</div>
<div class="community-top-box">
    <div id="community-top-notice">
        ğŸ“£ê³µì§€ ë° ê·œì¹™
    </div>
    {% if request.user.is_authenticated %}
        <a href="{% url 'community_user:post_create' %}" id="community-top-btn">ê¸€ì“°ê¸°</a>
    {% endif %}
</div>
<div class="community-post-container">
    {% if posts %}
    {% for post in posts %}
    <div class="community-post-box" data-url="{% url 'community_user:post_detail' pk=post.id %}">
        <div class="community-post-box-left">
            <div class="community-post-box-title">
                <h2>ì œëª©</h2>
                <h2 class="community-title">{{ post.title }}</h2>
            </div>
            <div class="community-post-box-author">
                <h2>ì‘ì„±ì</h2>
                <h2>{{post.author}}</h2>
            </div>
            <div class="community-post-box-like">
                <img src="/static/img/full-heart.svg" alt="í•˜íŠ¸ ê°œìˆ˜" class="community-post-icon">
                <p>{{ post.total_likes }}</p>
                <img src="/static/img/full-bookmark.svg" alt="ë¶ë§ˆí¬ ê°œìˆ˜" class="community-post-icon">
                <p>{{ post.total_bookmarks }}</p>
            </div>
        </div>
        <div class="community-post-box-right">
            <div class="community-post-box-content">
                <h2>ë³¸ë¬¸</h2>
                <p class="community-content">{{ post.content }}</p>
            </div>
            <div class="community-post-box-comment">
                <h2>ëŒ“ê¸€</h2>
                {% if post.comments.first %}
                    <p>{{ post.comments.first.content|slice:":7" }}...</p>
                {% else %}
                    <p>ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                {% endif %}
            </div>
            <!-- <div class="community-post-box-ud">
            {% if request.user == post.author %}
                <a href="{% url 'community_user:post_update' post.id %}">Edit</a>
                <a href="{% url 'community_user:post_delete' post.id %}">Delete</a>
            {% endif %}
            </div> -->
        </div>
    <!-- </a> -->
    </div>
    {% endfor %}
{% else %}
<p>ì‘ì„±ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>    
{% endif %}
</div>
{% endblock %}
{% block script %}
    <script src="/static/js/community/community_list.js"></script>
{% endblock %}