{% extends 'base.html' %}
{% block content %}
<div class="community-header">
    <div class="community-category"><a href="{% url 'community_user:event_list' %}">공지 및 이벤트</a></div>
    <div class="community-category"><a href="{% url 'community_user:chatroom_list' %}">채팅방</a></div>
    <div class="community-category"><a href="{% url 'community_user:post_list' %}">커뮤니티</a></div>
</div>
<div class="community-content">
    <h1>공지 및 이벤트</h1>
    <div class="button-group">
        <button onclick="showSection('events')">이벤트 보기</button>
        <button onclick="showSection('notices')">공지사항 보기</button>
    </div>

    <div id="events" class="section">
        <h2>Events</h2>
        <ul>
            {% for event in events %}
                <li>
                    <img src="{{ event.image.url }}" alt="{{ event.title }}" style="max-width: 100px;">
                    <a href="{% url 'community_user:event_detail' event.pk %}">{{ event.title }}</a> - 
                    {{ event.start_date }} ~ {{ event.end_date }}
                </li>
            {% endfor %}
        </ul>
        {% if user.is_staff %}
            <a href="{% url 'community_user:event_create' %}">Add Event</a>
        {% endif %}
    </div>

    <div id="notices" class="section" style="display:none;">
        <h2>Notices</h2>
        <ul>
            {% for notice in notices %}
                <li>
                    <a href="{% url 'community_user:notice_detail' notice.pk %}">{{ notice.title }}</a> - 
                    {{ notice.created_at }}
                </li>
            {% endfor %}
        </ul>
        {% if user.is_staff %}
            <a href="{% url 'community_user:notice_create' %}">Add Notice</a>
        {% endif %}
    </div>
</div>

<script>
    function showSection(sectionId) {
        document.getElementById('events').style.display = 'none';
        document.getElementById('notices').style.display = 'none';
        document.getElementById(sectionId).style.display = 'block';
    }
</script>
{% endblock %}
